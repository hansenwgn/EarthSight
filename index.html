<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
<<<<<<< HEAD
    <title>Flood Risk Management of Kuala Lumpur, Malaysia</title>
=======
    <title>Flood Risk Management Strategies for Kuala Lumpur, Malaysia</title>
>>>>>>> 0322bcece5553db024078039e0f4b1947bf548fd
    <meta charset="utf-8" />
    <meta name="author" content="Hansen Wiguna, Ahmad Farhan, Zirui Guo, Yao Wang, Tongmeng Xie" />
    <script src="libs/header-attrs-2.18/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
<<<<<<< HEAD
# Flood Risk Management of Kuala Lumpur, Malaysia
=======
# Flood Risk Management Strategies for Kuala Lumpur, Malaysia
>>>>>>> 0322bcece5553db024078039e0f4b1947bf548fd
]
.subtitle[
## ⚔<br/>Group: EarthSight
]
.author[
### Hansen Wiguna, Ahmad Farhan, Zirui Guo, Yao Wang, Tongmeng Xie
]
.institute[
### University College London
]
.date[
### 2023/02/23 (updated: 2023-03-19)
]

---

class: inverse, center, middle




# Outline


### 1. Context, Regulation, &amp; Problem Definition

### 2. Approach Methodology &amp; Output

### 3. Project Management Overview

### 4. Conclusion

### 5. References

---
class: inverse, center, middle



# Context, Regulation, &amp; Problem Definition
---
# Malaysia's Disaster Risk Profile

- Malaysia had the highest percentage (67%) of the population exposed to floods among ASEAN Member States (between July 2012 and January 2019) as reported by ASEAN Coordinating Centre for Humanitarian Assistance on disaster management in March 2019.

- Monsoon and flash floods are the primary climate related natural disasters in the country.

- Nine percent of land area in Malaysia is flood prone and 4.8 million people live in areas at risk to flood.

- Worst floods in the past 30 years have occurred from 2003 onwards. The majority of natural disasters from 1998 to 2018 were natural disasters (38/51).

- Over the past 3 years, Malaysia has suffered from the heaviest floods in its history in over 2 decades, affecting states all across the nation.
---

#Flood Impacts

###Social 
- Tens of thousands suffer from population displacement annually. Lives have also been lost.

###Economic


###Environmental

---
# Location Selection: Why Kuala Lumpur?
- Malaysia's capital city.

- Serves as the economic centre of Malaysia alongside the neighbouring state of Selangor. Damage to the federal territory and its surroundings impedes the country's economic output as most businesses are closest to the country's capital.

- KL is the most complete infrastructure-wise, will act as a benchmark for other states in terms of development goals.
---
# Research Questions
- What is the current structure and practices in place to respond to natural disasters?

- What gaps can we identify within the aforementioned system?

- What current remote sensing methods are being used to acquire topographic information in Malaysia?

---
# Malaysia's Disaster Risk Reduction Framework
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="img/msian disaster risk framework.png" alt="flow chart" width="50%" /&gt;
&lt;p class="caption"&gt;flow chart&lt;/p&gt;
&lt;/div&gt;

---
# Gaps Identified Within Current Framework

- Insufficient data available
  - Data is only sufficient enough for forecasting flood occurrence, not for the prediction of potential flood prone areas or the.

- Disjointed coordination between relevant stakeholders: 
  - Framework is reactive instead of proactive, relevant authorities mobilise resources only after disaster has taken place.
  
  - Only disaster-related agencies are a part of the framework. Involvement should include all ministries affected by ramifications of natural disasters.
  
---
# Aims of Proposal
- To provide a more comprehensive disaster response mechanism using current remotely sensed methods.

- To ensure alignment of data-driven methods for disaster risk mitigation in line with goals set by ratified international agreements (COP26, SDG goals, C40 cities, Sendai Framework).

- To identify gaps for integration of proposed methods to existing disaster risk framework.

- To expand accessibility of findings beyond disaster response to incorporate involvement of all relevant departments and ministries.

---
class: inverse, center, middle
# Approach Methodology &amp; Output
---


--- 
## Workflow and Methodology (Tongmeng and Zirui)
- To make policies implementable

  - Need to propose real analysis workflow
  
  - Give prototypes illustrating how EO data and remote sensing can help
  
  - Fit the workflow into the flood solution
  
  - Work on the chaining of function modules and potential automisation of pipeline
  
- How can these facilitate minimising risks for people, governments and more

  - How are information gaps closed
  
  - How are loss prevented
  
  - Identify persisting risks
  
---

## Flood Forecasting - A Quick Review
### The old-fashioned way - Hydrological model 
Uses historical data on precipitation, runoff, and other factors to predict flood occurrences. 
Relies on physical equations and mathematical representations of the water cycle, e.g.:
- Continuity Equation Balances water storage (∆S) with inflow (I) and outflow (O): 
  \begin{equation}
    \Delta S = I - O
    \end{equation}
- Runoff Estimation: 
`$$Q = (P - Ia)^2 / (P - Ia + S)$$`
  Where
  - Q: direct runoff (depth)
  - P: direct runoff (depth) 
  - Ia: initial abstraction, representing the water intercepted by vegetation, infiltration, and surface storage
  - S: potential maximum retention (depth), depending on soil type, land use, antecedent moisture conditions
  
&lt;div class="footnotes"&gt;
&lt;small&gt;
- Reference: US Army Corps of Engineers, Hydrologic Engineering Center. (n.d.). &lt;a href="https://www.hec.usace.army.mil/software/hec-ras/" target="_blank"&gt;HEC-RAS&lt;/a&gt;. 
&lt;/small&gt;
&lt;/div&gt;

---
### The old-fashioned way - Hydrological model 

Example of simulating watershed on a map of Digital Elevation Model (DEM)
- Continuity Equation 
  - Ensures the water balance
  - Tracks the flow of water (through e.g. surface water, soil moisture and groundwater)
- Runoff Estimation: 
  - quantifying the amount of water 


&lt;video style="display: block; margin-left: auto; margin-right: auto; width: auto; height: auto;" autoplay&gt;
&lt;source src="vids/400SqMileWatershed.mpeg" type="video/mp4"&gt;
&lt;/video&gt;


&lt;div class="footnotes"&gt;
&lt;small&gt;
- Reference: US Army Corps of Engineers, Hydrologic Engineering Center. (n.d.). &lt;a href="https://www.hec.usace.army.mil/software/hec-ras/" target="_blank"&gt;HEC-RAS&lt;/a&gt;. 
&lt;/small&gt;
&lt;/div&gt;
---
### The old-fashioned way - Hydrological model 
DEM-based hydrological models 
- Identify low-lying areas and floodplains in the urban landscape that are more susceptible to flooding. 
- Inform decisions
  - Planners: Floodplain zoning and land-use planning ( flood-resistant land uses, such as parks and recreational areas, to flood-prone regions.)
  - Emergency response teams can prioritise levees and floodwalls construction in certain areas
  - Design evacuation plans to minimise casualties

&lt;video width="1440" height="560" autoplay&gt;
&lt;source src="vids/400SqMileWatershed.mpeg" type="video/mp4"&gt;
&lt;/video&gt;



&lt;div class="footnotes"&gt;
&lt;small&gt;
- Reference: US Army Corps of Engineers, Hydrologic Engineering Center. (n.d.). &lt;a href="https://www.hec.usace.army.mil/software/hec-ras/" target="_blank"&gt;HEC-RAS&lt;/a&gt;. 
&lt;/small&gt;
&lt;/div&gt;
---
class: inverse, middle
# How can Flood prediction help Kuala lumpur: 


- ### How are information gaps closed

- ### How are loss prevented

- ### Identify persisting risks

  
---
## Flood risk management —— Flood prediction.
Significant Savings in Case Studies
- European Union's Floods Directive: €460 million saved in avoided damages (2006-2015)

- Iowa Flood Center: $96 million saved in flood damage costs (2010-2015)

- Flood Forecasting Centre (UK): £1.2 billion saved in potential damages (2009-2014)

&lt;div class="footnotes"&gt;
&lt;small&gt;
References: - European Environment Agency (2016). Flood risks and environmental vulnerability ↩

- Demir, I., &amp; Krajewski, W. F. (2016). Towards an information system for the socially vulnerable groups during flood disasters ↩

- &lt;a href="https://uiowa.edu/" target="_blank"-&gt;Environment Agency and Met Office (2015). Flood Forecasting Centre Five Year Review 2009-2014&lt;/a&gt;. 
&lt;/small&gt;
&lt;/div&gt;

---
### Machine-Learning based prediction - A blackbox considering numerous factors

| Data Pipeline Step | Description |
| --- | --- |
| Data Collection | Collect geo-environmental data for Kuala Lumpur, including elevation, slope, soil type, substrate, land cover, NDVI, land use, imperviousness, distance to river, and distance to road |
| Preprocessing | Standardize maps using QGIS: project into EPSG:3168 coordinate system, convert vector to raster maps, clip to Kuala Lumpur boundaries, resample to 1m resolution, and convert raster images to numerical data with 10m grid size using Rasterio |
| Feature Selection | Perform multicollinearity diagnosis test to exclude similar features, reducing training time and computational power. Use features with VIF less than 10 in ANN models |
| Data Balancing | Balance data with oversampling and undersampling due to imbalanced flood risk distribution. Adjust non-flood areas (98%, 95%, 90% for 30-, 100-, and 1000-year events) and level 4 risk areas (0.01% and 0.06% for 30- and 100-year events) |
| Model Selection &amp; Assessment | Apply NB, perceptron, ANN, and CNN models for 30-, 100-, and 1000-year flood events. Evaluate performance using suitable metrics |
---
## Flood prediction
### Metrics
Accuracy, F-beta score, and receiver operating characteristic (ROC) curve, as well as the oversampling and undersampling techniques used to address the issue of data imbalance. 
---
## Flood prediction
### What do we mean by accuracy:
@
---
class: inverse, center, middle

# Does Prediction Suffice?
---
## Is Prediction Enough For Flood Risk Management?
### Pros and cons of ML-based flood prediction
| Pros | Cons |
| --- | --- |
| Mature tech-flow | Computation-intense |
| Promising accuracy | Prone to Data Flaws |
| Utilising ML/DL models | Cumbersome to deployment|
| Prediction Based on Abundant information | Data-expensive |
| Almost always generate outcome | But Untimely! |
---
class: inverse, center, middle
# Introducing Real-Time monitoring
---
## Flood risk management - Real Time monitoring
### Synthetic Aperture Radar (SAR) for Flood Monitoring
- SAR: Active remote sensing technology that can penetrate clouds, operate day or night, and provide high-resolution imagery1

- Real-time flood monitoring: Timely and accurate information on flood extent, duration, and impact for emergency response and management

### Benefits of SAR-based Flood Monitoring
- Rapid assessment: Quick acquisition and processing of data, enabling faster response to flood events

- Wide-area coverage: Large-scale flood monitoring, even in remote or inaccessible areas

- All-weather capability: Reliable data collection, regardless of weather conditions or time of day

&lt;div class="footnotes"&gt;
&lt;small&gt;
References: - NASA Jet Propulsion Laboratory (2021). ARIA Project. https://aria.jpl.nasa.gov/
&lt;/small&gt;
&lt;/div&gt;


---
class: inverse, center, middle
# When AIoT comes in

---
## AIOT comes to aid

- Introducing AIoT (Artificial Intelligence of Things) can lead to more efficient, accurate, and timely flood prediction systems.

| MLp-Pros | ML-Cons | AIoT Solution |
| --- | --- | --- |
| Mature tech-flow | Computation-intense | Edge computing for localized data processing |
| Promising accuracy | Prone to Data Flaws | Diverse IoT data sources improve model robustness |
| Utilizing ML/DL models | Cumbersome to deployment | Scalable and modular IoT deployment |
| Prediction Based on Abundant information | Data-expensive | Edge computing and data compression reduce data costs |
| Almost always generate outcome | Untimely | Real-time data enables timely predictions and responses |


---
## Assessing flood damage
### Overview
Considering that Malaysia does not have enough datasets for analyzing, in this case, we need to make sure that the datasets that we owned can satisfy the methodology we select.  

Under this circumstance, we decide to use night light and census data to evaluate the number of people affected. The process is divided into three major steps: data pre-processing, model building and assessment.
---
## Assessing flood damage
### Work flow
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="night/flow.png" alt="flow chart" width="90%" /&gt;
&lt;p class="caption"&gt;flow chart&lt;/p&gt;
&lt;/div&gt;

---
## Assessing flood damage
### Data pre-process



* First, the NPP-VIIRS night-light remote sensing data were resampled to 500m × 500m based on the administrative map with image cropping, Albers projection and nearest neighbor interpolation, and the negative areas were assigned a value of 0. 

* Using the statistical volume method of radiation normalization to reducing the impact of cloud cover on night-light remote sensing imagery .
---
## Assessing flood damage
### Building model

Light index can indicate the dynamics population and economic development. To be specific, light density can represent the density of population, light area can represent the distribution of population, the tendency of urban expansion .

---
## Assessing flood damage
### Building model
`$$LD=(1/N)\sum_{i = 1}^{i=n}D N_{i}$$` 
$$LA=\sum{i}, D N_{i}&gt;1 $$ 

In the formula, `\(LD\)` is the average of light density, `\(LA\)` is the area of light and `\(DN_{i}\)` is the brightness of pixel.

`$$y=a\times R_{VIIRS} + b$$` 
`$$y=a\times R_{VIIRS}^{2} + b\times R_{VIIRS} + c$$` 

`\(y\)` is population related parameters, `\(R_{VIIRS}\)` is NPP-VIIRS night light brightness radiation value, a, b, c are constant items.

`$$P_{E}=\rho_{e} \times A_{e}$$` 

`\(P_{E}\)` is the total affected population; `\(rho_{e}\)` is the population density of the affected area; `\(A_{e}\)` is the affected area.

---
## Assessing flood damage
### Assess model
Before and after the flood, the brightness of the lights changed significantly, and the damage of power lines, the collapse of buildings and evacuation of people caused the brightness of the lights to decrease significantly.

In that case, by comparing the images of light between before disaster and after disaster we can get the information of the disappear of light. Based on above formula and information, we can estimate how many people suffer the disaster and economic losses as well.

---
class: inverse, center, middle

#But how do we evaluate the accuracy of our model?#

---
## Assessing flood damage
### Assess model

Before we apply we model, we can estimate the number of people firstly by using the before disaster's image and access the accuracy of our model.

`$$RE=\frac{R_{e}-R_{s}}{R_{s}}\times100\%$$` 

`\(R_{e}\)` is the population of estimate, and `\(R_{s}\)` is the ture value of population.

| Relative margin of error | Level of accuracy  |
| --- | --- |
|&gt; 50%| High   |
| 25% ~ 50% | Medium |
|&lt; 25% | Low    |

---
class: inverse, center, middle
# Project Management Overview 

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="img/pm1.png" alt="flow chart" width="50%" /&gt;
&lt;p class="caption"&gt;flow chart&lt;/p&gt;
&lt;/div&gt;
---
# Outline of Project Management 

.pull-left[
### 1. Phases
### 2. Project Plan
### 3. Risks and Mitigative Actions
### 4. Timeline
### 5. Resource Allocation
### 6. Value for Money

]

.pull-right[
&lt;img src="img/pm2.png" width="80%" style="display: block; margin: auto;" /&gt;
]
---
## Project Management - Phases

&lt;img src="img/Phases.jpeg" style="display: block; margin: auto;" /&gt;

---
## Project Management - Project Plan / Work Package (1)
#### 1. Project initiation and stakeholder engagement (Month 1)
  - Develop project charter 
  - Identify and engage with stakeholders (set questions) 
  - Establish project governance structure (National Disaster Management Agency)
  
#### 2. Data Collection and Analysis (Month 2-5)
  - Collect relevant data, including night light data, satellite imagery, digital elevation models, and flood maps.
  - Analyze historical flood data 
  - Preprocess the data to ensure that it is compatible with our analytical methods.
  - Develop machine learning models, including naïve Bayes, perceptron, artificial neural networks (ANNs), and convolutional neural networks (CNNs).
  - Train and evaluate the models using appropriate statistical metrics.
  


---
## Project Management - Project Plan / Work Package (2)

#### 3. Flood Risk Mapping and Mitigation Strategies (Month 6-8)
  - Using DEM-based hydrological models to identify floodplain zoning (flood-resistant and flood-prone land uses)
  - Produce flood risk maps using the machine learning models and interpret the results.
  - Identify areas that are most vulnerable to flooding and propose potential mitigation strategies.
  - Building flooding forecasting/prediction system 
  
&lt;img src="img/floodrisk.png" width="45%" style="display: block; margin: auto;" /&gt;

---
## Project Management - Project Plan / Work Package (3)  
#### 4. Report Writing and Presentation (Month 9-10)
  - Write a comprehensive report detailing the methodology and findings of the study.
  - Prepare a presentation to share the results and recommendations with stakeholders.
  - Showcasing and stakeholder meeting, follow up by refinement
  
#### 5. Monitor and Evaluate Effectiveness of Strategies (Month 11-12) 
  - Establish a monitoring and evaluation framework 
  - Conduct regular evaluations of the implemented strategies 
  - Provide recommendations for improvements 
  - Damage assessment (light data indicates disaster victims and economic loss)
---
## Project Management - Risks and Mitigative Actions

.pull-left[
1. Data Quality: Poor remote sensing data may lead to analysis errors. We will carefully assess our data sources and perform thorough quality checks during data preprocessing to reduce this risk.
2. Model Accuracy: Machine learning models may mispredict Malaysian flood risk. We'll use statistical metrics to assess our models' accuracy and adjust them to reduce this risk.
3. Stakeholder Engagement: Stakeholders may reject our findings and recommendations. We will engage stakeholders throughout the project and clearly communicate our results to mitigate this risk.
4. Human resources: clear contracts to avoid leaving mid-project.
]

.pull-right[
&lt;img src="img/risk.png" width="80%" style="display: block; margin: auto;" /&gt;
]
---
## Project Management - Timeline
&lt;img src="img/gantt1.jpg" width="100%" style="display: block; margin: auto;" /&gt;

---
## Project Management - Resource Allocation (1)
.pull-left[
- Project Manager: Project managers oversee and deliver projects. To engage stakeholders, they will need project management, flood risk management, and good communication skills. This project will consume all their time.

- Data Analyst (2): The data analyst will collect, analyse, and map flood-prone areas using earth observation data. This project will consume all their time.

]
.pull-right[
&lt;img src="img/manager.png" width="70%" style="display: block; margin: auto;" /&gt;
]

---
## Project Management - Resource Allocation (2)
.pull-left[
&lt;img src="img/analyst.png" width="70%" style="display: block; margin: auto;" /&gt;
]
.pull-right[
- Flood Risk Management Expert/Analyst: The flood risk management expert will develop and implement flood risk management strategies, prioritise flood mitigation measures, and evaluate them regularly. This project will consume all their time.

- Stakeholder Engagement Specialist: The stakeholder engagement specialist will organise workshops, engage stakeholders, and provide project updates. This project will consume all their time.
]


---
## Project Management - Value for Money
The total budget for this project is £500,000. We'll streamline the project to save money. To reduce costs, we will prioritise open-source software and free data sources. We will also create flood risk maps and mitigation strategies that the Malaysian government can use in its daily operations. This project will help Malaysian flood risk management, making it a good city investment.

&lt;img src="img/cost.png" width="55%" style="display: block; margin: auto;" /&gt;
---
## Project Management - Deliverable


&lt;img src="img/deliverable.png" width="85%" style="display: block; margin: auto;" /&gt;
---
## Conclusion

.pull-left[
#### Problem Definition 
Nine percent of land area in Malaysia is flood prone and 4.8 million people live in areas at risk to flood.  

#### Approach:  
DEM-based hydrological models to identify floodplain zoning &amp; apply NB, perceptron, ANN, and CNN models for prediction &amp; light data for density

#### Output:  
Floodplain &amp; risk map, prediction model, and damage assessment


]
.pull-right[

#### Project Plan:  
Multiple work packages with risk and mitigative actions, timeline, resource allocation, and value for money

#### Improvements:  
From reactive to a more proactive approach by developing prediction model, assessing damage in a more scalable way using earth observation data, and provide transparent information for different stakeholders
]
---
## References
‘CHA-Malaysia.pdf’ (no date). Available at: https://jfit-for-science.asia/wp-content/uploads/2019/11/CHA-Malaysia.pdf (Accessed: 19 March 2023).

Malaysia - Vulnerability | Climate Change Knowledge Portal (no date). Available at: https://climateknowledgeportal.worldbank.org/country/malaysia/vulnerability (Accessed: 23 February 2023).

European Environment Agency (2016). Flood risks and environmental vulnerability. https://www.eea.europa.eu/publications/flood-risks-and-environmental-vulnerability

Demir, I., &amp; Krajewski, W. F. (2016). Towards an information system for the socially vulnerable groups during flood disasters. https://uiowa.edu/

Environment Agency and Met Office (2015). Flood Forecasting Centre Five Year Review 2009-2014. https://www.gov.uk/government/publications/flood-forecasting-centre-5-year-review-2009-to-2014

NASA Jet Propulsion Laboratory (2021). ARIA Project. https://aria.jpl.nasa.gov/

---
## References
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
